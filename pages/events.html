<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>События в JavaScript</title>
	<link rel="stylesheet" href="../css/style.css">
	<link rel="stylesheet" href="../css/dark-theme.css">
	<link rel="stylesheet" href="../css/burger-menu.css">
	<link rel="stylesheet" href="../css/pages/events.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">


	<!-- ЭКСТРЕННЫЙ ФИКС - добавьте в <head>  -->
	<!-- <style>
		.nav-mobile {
			z-index: 99999 !important;
			background: white !important;
			border: 5px solid red !important;
			box-shadow: 0 0 20px rgba(255, 0, 0, 0.5) !important;
		}

		.menu-overlay {
			z-index: 1 !important;
			background: transparent !important;
			pointer-events: none !important;
		}

		.burger-icon {
			z-index: 100000 !important;
			background: yellow !important;
			padding: 10px !important;
		}
	</style> -->
</head>

<body>
	<!-- Шапка -->
	<header class="header">
		<div class="container">
			<div class="header-inner">
				<div class="burger-menu">
					<div class="burger-icon" id="burgerIcon">
						<span></span>
						<span></span>
						<span></span>
					</div>
				</div>

				<nav class="nav-desktop compact">
					<a href="../index.html">Главная</a>
					<a href="basics.html">Основы</a>
					<a href="variables.html">Переменные</a>
					<a href="functions.html">Функции</a>
					<a href="objects.html">Объекты</a>
					<a href="arrays.html">Массивы</a>
					<a href="dom.html">DOM</a>
					<a href="events.html" class="active">События</a>
					<a href="async.html">Асинхронность</a>
					<a href="es6.html">ES6+</a>
					<a href="practice.html">Практика</a>
					<a href="Git.html">Работа с Git</a>
				</nav>
			</div>
		</div>

		<nav class="nav-mobile" id="mobileMenu">
			<div class="mobile-menu-header">
				<h3>Меню</h3>
				<div class="close-menu" id="closeMenu">
					<i class="fas fa-times"></i>
				</div>
			</div>
			<ul class="mobile-nav-list">
				<li><a href="../index.html"><i class="fas fa-home"></i>Главная</a></li>
				<li><a href="basics.html"><i class="fas fa-code"></i>Основы JS</a></li>
				<li><a href="variables.html"><i class="fas fa-memory"></i>Переменные</a></li>
				<li><a href="functions.html"><i class="fas fa-cogs"></i>Функции</a></li>
				<li><a href="objects.html"><i class="fas fa-cube"></i>Объекты</a></li>
				<li><a href="arrays.html"><i class="fas fa-list"></i>Массивы</a></li>
				<li><a href="dom.html"><i class="fas fa-file-code"></i>DOM</a></li>
				<li><a href="events.html" class="active"><i class="fas fa-mouse-pointer"></i>События</a></li>
				<li><a href="async.html"><i class="fas fa-sync-alt"></i>Асинхронность</a></li>
				<li><a href="es6.html"><i class="fas fa-star"></i>ES6+</a></li>
				<li><a href="practice.html"><i class="fas fa-laptop-code"></i>Практика</a></li>
				<li><a href="Git.html"><i class="fas fa-cogs"></i>Работа с Git</a></li>
			</ul>
		</nav>
	</header>

	<main class="main-content">
		<div class="container">
			<div class="lesson-content">
				<h1>События в JavaScript</h1>

				<div class="lesson-meta">
					<span class="lesson-tag">Продвинутый уровень</span>
					<span class="lesson-time"><i class="far fa-clock"></i> 45 минут</span>
					<span class="lesson-chapters"><i class="fas fa-list-ol"></i> 7 разделов</span>
				</div>

				<div class="lesson-intro">
					<p><strong>События</strong> — это действия или происшествия, которые происходят в браузере,
						о которых программа может реагировать. Взаимодействие пользователя с веб-страницей построено
						на обработке событий.</p>
				</div>

				<!-- Быстрая навигация по уроку -->
				<div class="lesson-toc">
					<h3><i class="fas fa-map-signs"></i> Содержание урока:</h3>
					<ol>
						<li><a href="#what-are-events">Что такое события?</a></li>
						<li><a href="#event-types">Типы событий</a></li>
						<li><a href="#event-handling">Обработка событий</a></li>
						<li><a href="#event-object">Объект события</a></li>
						<li><a href="#event-flow">Всплытие и погружение</a></li>
						<li><a href="#event-delegation">Делегирование событий</a></li>
						<li><a href="#practice">Практическое задание</a></li>
					</ol>
				</div>

				<!-- ===== РАЗДЕЛ 1: Что такое события? ===== -->
				<section id="what-are-events" class="lesson-section">
					<h2><i class="fas fa-bolt"></i> Что такое события?</h2>
					<p>События — это сигналы, которые генерируются браузером при взаимодействии пользователя со
						страницей или при возникновении определенных условий.</p>

					<div class="features-grid">
						<div class="feature-card">
							<i class="fas fa-mouse-pointer"></i>
							<h4>Действия пользователя</h4>
							<p>Клики, нажатия клавиш, движение мыши</p>
						</div>
						<div class="feature-card">
							<i class="fas fa-window-restore"></i>
							<h4>Действия браузера</h4>
							<p>Загрузка страницы, изменение размера</p>
						</div>
						<div class="feature-card">
							<i class="fas fa-exchange-alt"></i>
							<h4>Сетевые события</h4>
							<p>Загрузка ресурсов, ошибки сети</p>
						</div>
						<div class="feature-card">
							<i class="fas fa-code"></i>
							<h4>Программные события</h4>
							<p>Таймеры, анимации, промисы</p>
						</div>
					</div>

					<div class="info-box">
						<h4><i class="fas fa-lightbulb"></i> Зачем нужны события?</h4>
						<ul>
							<li><strong>Интерактивность</strong> — реагирование на действия пользователя</li>
							<li><strong>Обратная связь</strong> — визуальный отклик на взаимодействие</li>
							<li><strong>Валидация</strong> — проверка данных в реальном времени</li>
							<li><strong>Анимации</strong> — плавные переходы и эффекты</li>
							<li><strong>Асинхронность</strong> — обработка загрузки данных</li>
						</ul>
					</div>
				</section>

				<!-- ===== РАЗДЕЛ 2: Типы событий ===== -->
				<section id="event-types" class="lesson-section">
					<h2><i class="fas fa-list-alt"></i> Типы событий</h2>
					<p>В JavaScript существует множество типов событий, которые можно разделить на категории:</p>

					<div class="tabs">
						<div class="tab-buttons">
							<button class="tab-btn active" data-tab="tab-mouse">События мыши</button>
							<button class="tab-btn" data-tab="tab-keyboard">Клавиатура</button>
							<button class="tab-btn" data-tab="tab-form">Формы</button>
							<button class="tab-btn" data-tab="tab-window">Окно</button>
							<button class="tab-btn" data-tab="tab-touch">Сенсорные</button>
						</div>

						<div class="tab-content active" id="tab-mouse">
							<h4><i class="fas fa-mouse"></i> События мыши</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="javascript">const demoArea = document.createElement('div');
demoArea.id = 'mouseDemo';
demoArea.style.cssText = 'width: 300px; height: 200px; background: #f0f0f0; border: 2px solid #ccc; padding: 20px; margin: 10px 0;';
demoArea.innerHTML = 'Наведите, кликните, нажмите мышь в этой области';

// click - клик левой кнопкой мыши
demoArea.addEventListener('click', function(e) {
    console.log(`Клик в точке: X=${e.clientX}, Y=${e.clientY}`);
});

// dblclick - двойной клик
demoArea.addEventListener('dblclick', function() {
    console.log('Двойной клик!');
});

// mousedown - нажатие кнопки мыши
demoArea.addEventListener('mousedown', function(e) {
    console.log(`Нажата кнопка мыши: ${e.button} (0=левая, 1=средняя, 2=правая)`);
});

// mouseup - отпускание кнопки
demoArea.addEventListener('mouseup', function() {
    console.log('Кнопка мыши отпущена');
});

// mouseover - наведение на элемент
demoArea.addEventListener('mouseover', function() {
    console.log('Мышь над элементом');
    this.style.backgroundColor = '#e0e0ff';
});

// mouseout - уход мыши с элемента
demoArea.addEventListener('mouseout', function() {
    console.log('Мышь ушла с элемента');
    this.style.backgroundColor = '#f0f0f0';
});

// mousemove - движение мыши над элементом
demoArea.addEventListener('mousemove', function(e) {
    const coords = document.getElementById('mouseCoords');
    if (coords) {
        coords.textContent = `X: ${e.offsetX}, Y: ${e.offsetY}`;
    }
});

// contextmenu - клик правой кнопкой (контекстное меню)
demoArea.addEventListener('contextmenu', function(e) {
    e.preventDefault(); // Отменяем стандартное контекстное меню
    console.log('Контекстное меню (правый клик)');
});

// Добавляем отображение координат
const coordsDisplay = document.createElement('div');
coordsDisplay.id = 'mouseCoords';
coordsDisplay.style.cssText = 'margin-top: 10px; font-family: monospace;';
demoArea.appendChild(coordsDisplay);

document.body.appendChild(demoArea);</code></pre>
								</div>
								<button class="btn btn-primary run-code" onclick="runMouseEventsDemo()">
									<i class="fas fa-play"></i> Запустить демо
								</button>
								<div class="output-container">
									<h4>Консоль:</h4>
									<div id="mouseOutput" class="console-output">
										<div class="console-line info">Нажмите "Запустить демо" и взаимодействуйте с
											областью</div>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-content" id="tab-keyboard">
							<h4><i class="fas fa-keyboard"></i> События клавиатуры</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="javascript">const inputDemo = document.createElement('input');
inputDemo.type = 'text';
inputDemo.placeholder = 'Введите текст и наблюдайте за событиями...';
inputDemo.style.cssText = 'width: 300px; padding: 10px; margin: 10px 0; display: block;';

// keydown - нажатие клавиши
inputDemo.addEventListener('keydown', function(e) {
    console.log(`keydown: Клавиша "${e.key}", Код: "${e.code}"`);
    console.log(`  Модификаторы: Ctrl=${e.ctrlKey}, Shift=${e.shiftKey}, Alt=${e.altKey}`);
    
    // Пример блокировки определенных клавиш
    if (e.key === 'Escape') {
        console.log('Escape заблокирован');
        e.preventDefault();
    }
});

// keyup - отпускание клавиши
inputDemo.addEventListener('keyup', function(e) {
    console.log(`keyup: Отпущена клавиша "${e.key}"`);
});

// keypress - устаревшее, но работает для печатных символов
inputDemo.addEventListener('keypress', function(e) {
    console.log(`keypress: Символ "${String.fromCharCode(e.charCode)}"`);
});

// Пример обработки комбинаций клавиш
document.addEventListener('keydown', function(e) {
    // Ctrl+S (сохранение)
    if (e.ctrlKey && e.key === 's') {
        e.preventDefault();
        console.log('Ctrl+S: Сохранить документ');
    }
    
    // Ctrl+Shift+I (инспектор)
    if (e.ctrlKey && e.shiftKey && e.key === 'I') {
        console.log('Ctrl+Shift+I: Открыть инструменты разработчика');
    }
    
    // Стрелки для навигации
    if (e.key.startsWith('Arrow')) {
        console.log(`Нажата стрелка: ${e.key}`);
    }
});

// Создаем область для горячих клавиш
const hotkeyDemo = document.createElement('div');
hotkeyDemo.innerHTML = `
    &lt;h4&gt;Горячие клавиши:&lt;/h4&gt;
    &lt;ul&gt;
        &lt;li&gt;Ctrl+S - Сохранить&lt;/li&gt;
        &lt;li&gt;Ctrl+C - Копировать&lt;/li&gt;
        &lt;li&gt;Ctrl+V - Вставить&lt;/li&gt;
        &lt;li&gt;Escape - Сброс&lt;/li&gt;
    &lt;/ul&gt;
`;

document.body.appendChild(inputDemo);
document.body.appendChild(hotkeyDemo);</code></pre>
								</div>
								<button class="btn btn-primary run-code" onclick="runKeyboardEventsDemo()">
									<i class="fas fa-play"></i> Запустить демо
								</button>
								<div class="output-container">
									<h4>Консоль:</h4>
									<div id="keyboardOutput" class="console-output">
										<div class="console-line info">Нажмите "Запустить демо" и введите текст</div>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-content" id="tab-form">
							<h4><i class="fas fa-edit"></i> События форм</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="javascript">// Создаем форму для демонстрации
const formDemo = document.createElement('form');
formDemo.id = 'demoForm';
formDemo.innerHTML = `
    &lt;div style="margin-bottom: 10px;"&gt;
        &lt;label&gt;Имя:&lt;/label&gt;
        &lt;input type="text" id="name" placeholder="Введите имя"&gt;
    &lt;/div&gt;
    &lt;div style="margin-bottom: 10px;"&gt;
        &lt;label&gt;Email:&lt;/label&gt;
        &lt;input type="email" id="email" placeholder="email@example.com"&gt;
    &lt;/div&gt;
    &lt;div style="margin-bottom: 10px;"&gt;
        &lt;label&gt;Сообщение:&lt;/label&gt;
        &lt;textarea id="message" placeholder="Введите сообщение..."&gt;&lt;/textarea&gt;
    &lt;/div&gt;
    &lt;div style="margin-bottom: 10px;"&gt;
        &lt;label&gt;
            &lt;input type="checkbox" id="agree"&gt;
            Согласен с условиями
        &lt;/label&gt;
    &lt;/div&gt;
    &lt;button type="submit"&gt;Отправить&lt;/button&gt;
`;

// Стили для формы
formDemo.style.cssText = 'padding: 20px; border: 1px solid #ccc; max-width: 400px; margin: 10px 0;';
const inputs = formDemo.querySelectorAll('input, textarea');
inputs.forEach(input => {
    input.style.cssText = 'width: 100%; padding: 8px; margin: 5px 0; box-sizing: border-box;';
});

// focus - получение фокуса
formDemo.querySelectorAll('input, textarea').forEach(input => {
    input.addEventListener('focus', function() {
        console.log(`Фокус на: ${this.id}`);
        this.style.borderColor = '#667eea';
        this.style.boxShadow = '0 0 5px rgba(102, 126, 234, 0.5)';
    });
});

// blur - потеря фокуса
formDemo.querySelectorAll('input, textarea').forEach(input => {
    input.addEventListener('blur', function() {
        console.log(`Потеря фокуса: ${this.id}`);
        this.style.borderColor = '#ccc';
        this.style.boxShadow = 'none';
        
        // Валидация при потере фокуса
        if (this.id === 'email' && this.value && !this.value.includes('@')) {
            console.log('Ошибка: неверный email');
            this.style.borderColor = '#f56565';
        }
    });
});

// input - ввод данных (реальное время)
formDemo.querySelectorAll('input, textarea').forEach(input => {
    input.addEventListener('input', function() {
        console.log(`Ввод в ${this.id}: ${this.value.substring(0, 30)}${this.value.length > 30 ? '...' : ''}`);
    });
});

// change - изменение значения (после потери фокуса)
formDemo.querySelector('#agree').addEventListener('change', function() {
    console.log(`Чекбокс: ${this.checked ? 'отмечен' : 'снят'}`);
});

// submit - отправка формы
formDemo.addEventListener('submit', function(e) {
    e.preventDefault(); // Отменяем стандартную отправку
    
    const name = this.querySelector('#name').value;
    const email = this.querySelector('#email').value;
    const message = this.querySelector('#message').value;
    const agree = this.querySelector('#agree').checked;
    
    console.log('=== Данные формы ===');
    console.log(`Имя: ${name}`);
    console.log(`Email: ${email}`);
    console.log(`Сообщение: ${message}`);
    console.log(`Согласие: ${agree}`);
    
    // Простая валидация
    if (!name) {
        console.log('Ошибка: укажите имя');
        return;
    }
    
    if (email && !email.includes('@')) {
        console.log('Ошибка: неверный email');
        return;
    }
    
    if (!agree) {
        console.log('Ошибка: необходимо согласие');
        return;
    }
    
    console.log('Форма успешно отправлена!');
    this.reset();
});

document.body.appendChild(formDemo);</code></pre>
								</div>
								<button class="btn btn-primary run-code" onclick="runFormEventsDemo()">
									<i class="fas fa-play"></i> Запустить демо
								</button>
								<div class="output-container">
									<h4>Консоль:</h4>
									<div id="formOutput" class="console-output">
										<div class="console-line info">Нажмите "Запустить демо" и взаимодействуйте с
											формой</div>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-content" id="tab-window">
							<h4><i class="fas fa-window-maximize"></i> События окна</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="javascript">// DOMContentLoaded - DOM загружен (быстрее чем load)
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM полностью загружен и обработан');
    console.log('Можно безопасно работать с элементами DOM');
});

// load - полная загрузка страницы (включая ресурсы)
window.addEventListener('load', function() {
    console.log('Страница полностью загружена');
    console.log('Все изображения, стили и скрипты загружены');
});

// beforeunload - перед закрытием/перезагрузкой страницы
window.addEventListener('beforeunload', function(e) {
    // Современные браузеры требуют установки returnValue
    e.preventDefault();
    e.returnValue = '';
    console.log('Пользователь пытается покинуть страницу');
    
    // Можно показать стандартное подтверждение
    return 'Вы уверены, что хотите покинуть страницу?';
});

// resize - изменение размера окна
let resizeTimeout;
window.addEventListener('resize', function() {
    console.log(`Размер окна: ${window.innerWidth}x${window.innerHeight}`);
    
    // Дебаунсинг (чтобы не вызывать слишком часто)
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
        console.log('Размер окна стабилизировался');
    }, 200);
});

// scroll - прокрутка страницы
let lastScroll = 0;
window.addEventListener('scroll', function() {
    const currentScroll = window.pageYOffset;
    const direction = currentScroll > lastScroll ? 'вниз' : 'вверх';
    
    console.log(`Прокрутка: ${currentScroll}px (${direction})`);
    console.log(`Видимая область: ${window.innerHeight}px`);
    console.log(`Высота документа: ${document.documentElement.scrollHeight}px`);
    
    // Определение достижения низа страницы
    if (window.innerHeight + currentScroll >= document.documentElement.scrollHeight - 100) {
        console.log('Приближение к концу страницы');
    }
    
    lastScroll = currentScroll;
});

// hashchange - изменение хэша в URL
window.addEventListener('hashchange', function() {
    console.log(`Хэш изменился: ${window.location.hash}`);
});

// online/offline - состояние сети
window.addEventListener('online', function() {
    console.log('Устройство подключено к интернету');
});

window.addEventListener('offline', function() {
    console.log('Устройство отключено от интернета');
});

// Создаем индикатор событий окна
const windowEventsDisplay = document.createElement('div');
windowEventsDisplay.id = 'windowEvents';
windowEventsDisplay.style.cssText = 'padding: 15px; border: 1px solid #ccc; margin: 10px 0; max-height: 200px; overflow-y: auto;';
windowEventsDisplay.innerHTML = '<h4>События окна:</h4>';

function logWindowEvent(message) {
    const time = new Date().toLocaleTimeString();
    const entry = document.createElement('div');
    entry.textContent = `[${time}] ${message}`;
    windowEventsDisplay.appendChild(entry);
    windowEventsDisplay.scrollTop = windowEventsDisplay.scrollHeight;
}

// Переопределяем console.log для отображения в индикаторе
const originalLog = console.log;
console.log = function(...args) {
    originalLog.apply(console, args);
    logWindowEvent(args.join(' '));
};

document.body.appendChild(windowEventsDisplay);</code></pre>
								</div>
								<button class="btn btn-primary run-code" onclick="runWindowEventsDemo()">
									<i class="fas fa-play"></i> Запустить демо
								</button>
								<div class="output-container">
									<h4>Консоль:</h4>
									<div id="windowOutput" class="console-output">
										<div class="console-line info">Нажмите "Запустить демо" и изменяйте размер
											окна/прокручивайте</div>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-content" id="tab-touch">
							<h4><i class="fas fa-mobile-alt"></i> Сенсорные события</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="javascript">// Создаем область для сенсорных событий
const touchDemo = document.createElement('div');
touchDemo.id = 'touchDemo';
touchDemo.style.cssText = 'width: 300px; height: 200px; background: #e8f4f8; border: 2px solid #4fd1c7; padding: 20px; margin: 10px 0; text-align: center; display: flex; align-items: center; justify-content: center;';
touchDemo.innerHTML = 'Коснитесь этой области на мобильном устройстве<br><small>Или используйте эмуляцию в DevTools</small>';

// touchstart - начало касания
touchDemo.addEventListener('touchstart', function(e) {
    e.preventDefault(); // Предотвращаем стандартное поведение
    console.log('touchstart: Начало касания');
    
    const touch = e.touches[0];
    console.log(`  Пальцев: ${e.touches.length}`);
    console.log(`  Координаты: X=${touch.clientX}, Y=${touch.clientY}`);
    
    this.style.backgroundColor = '#c6f6d5';
});

// touchmove - движение пальца
touchDemo.addEventListener('touchmove', function(e) {
    e.preventDefault();
    const touch = e.touches[0];
    console.log(`touchmove: X=${touch.clientX.toFixed(0)}, Y=${touch.clientY.toFixed(0)}`);
    
    // Обновляем позицию элемента (если нужно)
    // this.style.transform = `translate(${touch.clientX - 150}px, ${touch.clientY - 100}px)`;
});

// touchend - окончание касания
touchDemo.addEventListener('touchend', function(e) {
    console.log('touchend: Касание завершено');
    console.log(`  Пальцев осталось: ${e.touches.length}`);
    
    this.style.backgroundColor = '#e8f4f8';
    // this.style.transform = 'translate(0, 0)';
});

// touchcancel - прерывание касания (звонок и т.д.)
touchDemo.addEventListener('touchcancel', function() {
    console.log('touchcancel: Касание прервано системой');
});

// Эмуляция жестов
let startX, startY, startTime;

touchDemo.addEventListener('touchstart', function(e) {
    const touch = e.touches[0];
    startX = touch.clientX;
    startY = touch.clientY;
    startTime = Date.now();
});

touchDemo.addEventListener('touchend', function(e) {
    const touch = e.changedTouches[0];
    const endX = touch.clientX;
    const endY = touch.clientY;
    const endTime = Date.now();
    
    const deltaX = endX - startX;
    const deltaY = endY - startY;
    const duration = endTime - startTime;
    
    // Определяем тип жеста
    if (duration < 500) { // Быстрый жест
        if (Math.abs(deltaX) > 50 && Math.abs(deltaY) < 30) {
            console.log(deltaX > 0 ? 'Свайп вправо' : 'Свайп влево');
        } else if (Math.abs(deltaY) > 50 && Math.abs(deltaX) < 30) {
            console.log(deltaY > 0 ? 'Свайп вниз' : 'Свайп вверх');
        } else if (Math.abs(deltaX) < 20 && Math.abs(deltaY) < 20) {
            console.log('Тап (короткое касание)');
        }
    }
    
    // Сброс
    startX = startY = startTime = null;
});

// Создаем индикатор для десктопов
const touchIndicator = document.createElement('div');
touchIndicator.style.cssText = 'margin-top: 10px; padding: 10px; background: #f7fafc; border: 1px solid #cbd5e0;';
touchIndicator.innerHTML = `
    <p><strong>Для тестирования на ПК:</strong></p>
    <ol>
        <li>Откройте DevTools (F12)</li>
        <li>Включите режим мобильного устройства</li>
        <li>Выберите устройство с сенсорным экраном</li>
        <li>Кликайте мышью для эмуляции касаний</li>
    </ol>
`;

document.body.appendChild(touchDemo);
document.body.appendChild(touchIndicator);</code></pre>
								</div>
								<button class="btn btn-primary run-code" onclick="runTouchEventsDemo()">
									<i class="fas fa-play"></i> Запустить демо
								</button>
								<div class="output-container">
									<h4>Консоль:</h4>
									<div id="touchOutput" class="console-output">
										<div class="console-line info">Нажмите "Запустить демо" и коснитесь области
											(требуется мобильное устройство или эмуляция)</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>

				<!-- ===== РАЗДЕЛ 3: Обработка событий ===== -->
				<section id="event-handling" class="lesson-section">
					<h2><i class="fas fa-hand-pointer"></i> Обработка событий</h2>
					<p>Существует несколько способов назначить обработчики событий элементам:</p>

					<div class="tabs">
						<div class="tab-buttons">
							<button class="tab-btn active" data-tab="tab-inline">Inline (в HTML)</button>
							<button class="tab-btn" data-tab="tab-property">DOM-свойство</button>
							<button class="tab-btn" data-tab="tab-addeventlistener">addEventListener</button>
							<button class="tab-btn" data-tab="tab-remove">Удаление обработчиков</button>
						</div>

						<div class="tab-content active" id="tab-inline">
							<h4><i class="fas fa-code"></i> Inline обработчики (в HTML)</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="html">&lt;!-- Прямое указание в HTML --&gt;
&lt;button onclick="handleClick()"&gt;Кликни меня&lt;/button&gt;

&lt;button onclick="alert('Привет!')"&gt;Быстрое действие&lt;/button&gt;

&lt;button onclick="console.log('Клик в', new Date().toLocaleTimeString())"&gt;
    С временем
&lt;/button&gt;

&lt;input type="text" onchange="console.log('Изменено:', this.value)"&gt;

&lt;div onmouseover="this.style.backgroundColor='lightblue'" 
    onmouseout="this.style.backgroundColor='white'"&gt;
    Наведи на меня
&lt;/div&gt;</code></pre>
								</div>
								<div class="info-box">
									<h4><i class="fas fa-exclamation-triangle"></i> Недостатки inline подхода:</h4>
									<ul>
										<li><strong>Смешение HTML и JavaScript</strong> - нарушение принципа разделения
											ответственности</li>
										<li><strong>Сложность поддержки</strong> - код разбросан по разным местам</li>
										<li><strong>Одно событие на элемент</strong> - нельзя назначить несколько
											обработчиков</li>
										<li><strong>Безопасность</strong> - риск XSS-атак при динамическом
											контенте</li>
										<li><strong>Производительность</strong> - медленнее из-за парсинга строк</li>
									</ul>
									<p class="warning"><i class="fas fa-info-circle"></i> Этот подход считается
										устаревшим и не рекомендуется для использования в современных приложениях.</p>
								</div>
							</div>
						</div>

						<div class="tab-content" id="tab-property">
							<h4><i class="fas fa-cog"></i> DOM-свойства</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="javascript">// Получаем элемент
const button = document.createElement('button');
button.textContent = 'Кнопка с DOM-свойством';
document.body.appendChild(button);

// Назначаем обработчик через свойство
button.onclick = function() {
    console.log('Обработчик через onclick свойство');
    console.log('this ссылается на:', this);
};

// Можно использовать именованную функцию
function handleButtonClick() {
    console.log('Именованная функция обработчик');
}

button.onmouseover = handleButtonClick;

// Проблема: только один обработчик на событие
button.onclick = function() {
    console.log('Первый обработчик');
};

button.onclick = function() {
    console.log('Второй обработчик (перезаписал первый)');
};

// Пример с несколькими элементами
const buttons = [];
for (let i = 1; i <= 3; i++) {
    const btn = document.createElement('button');
    btn.textContent = `Кнопка ${i}`;
    btn.onclick = function() {
        console.log(`Нажата кнопка ${this.textContent}`);
    };
    buttons.push(btn);
    document.body.appendChild(btn);
}

// Стрелочные функции и this
const arrowBtn = document.createElement('button');
arrowBtn.textContent = 'Стрелочная функция';
arrowBtn.onclick = () => {
    console.log('Стрелочная функция');
    console.log('this ссылается на:', this); // window или undefined
    console.log('Нет доступа к элементу через this!');
};
document.body.appendChild(arrowBtn);</code></pre>
								</div>
								<button class="btn btn-primary run-code" onclick="runPropertyHandlerDemo()">
									<i class="fas fa-play"></i> Запустить демо
								</button>
								<div class="output-container">
									<h4>Консоль:</h4>
									<div id="propertyOutput" class="console-output">
										<div class="console-line info">Нажмите "Запустить демо" и кликайте по кнопкам
										</div>
									</div>
								</div>
							</div>
							<div class="tip-box">
								<h4><i class="fas fa-info-circle"></i> Когда использовать:</h4>
								<ul>
									<li><strong>Простые случаи</strong> - когда нужен только один обработчик</li>
									<li><strong>Быстрое прототипирование</strong> - для тестирования</li>
									<li><strong>Легаси-код</strong> - поддержка старых проектов</li>
									<li><strong>НЕ ДЛЯ ПРОИЗВОДСТВА</strong> - используйте addEventListener</li>
								</ul>
							</div>
						</div>

						<div class="tab-content" id="tab-addeventlistener">
							<h4><i class="fas fa-plus-circle"></i> addEventListener (рекомендуемый способ)</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="javascript">const demoBtn = document.createElement('button');
demoBtn.textContent = 'Тест addEventListener';
demoBtn.id = 'demoBtn';
document.body.appendChild(demoBtn);

// Базовое использование
demoBtn.addEventListener('click', function(event) {
    console.log('Первый обработчик click');
    console.log('Событие:', event.type);
    console.log('Цель:', event.target);
    console.log('this:', this); // Ссылается на элемент
});

// Несколько обработчиков на одно событие
demoBtn.addEventListener('click', function() {
    console.log('Второй обработчик click');
});

demoBtn.addEventListener('click', function() {
    console.log('Третий обработчик click');
});

// Разные типы событий
demoBtn.addEventListener('mouseover', function() {
    console.log('Мышь над кнопкой');
    this.style.backgroundColor = '#e2e8f0';
});

demoBtn.addEventListener('mouseout', function() {
    console.log('Мышь ушла с кнопки');
    this.style.backgroundColor = '';
});

// Использование стрелочных функций
demoBtn.addEventListener('dblclick', (event) => {
    console.log('Двойной клик (стрелочная функция)');
    console.log('this:', this); // Не ссылается на элемент!
    console.log('Используйте event.target:', event.target);
});

// Передача параметров через анонимную функцию
function logWithMessage(message, event) {
    console.log(message, 'время:', new Date().toLocaleTimeString());
}

demoBtn.addEventListener('click', function(event) {
    logWithMessage('Клик зарегистрирован', event);
});

// Или через bind
demoBtn.addEventListener('click', logWithMessage.bind(null, 'Клик через bind'));

// Третий параметр - options
const optionsBtn = document.createElement('button');
optionsBtn.textContent = 'Кнопка с options';
optionsBtn.style.marginLeft = '10px';
document.body.appendChild(optionsBtn);

// once: обработчик сработает только один раз
optionsBtn.addEventListener('click', function() {
    console.log('Этот обработчик сработает только один раз!');
}, { once: true });

// capture: фаза погружения (по умолчанию false - всплытие)
document.body.addEventListener('click', function() {
    console.log('Тело документа (всплытие)');
}, false);

document.body.addEventListener('click', function() {
    console.log('Тело документа (погружение)');
}, true);

// passive: улучшает производительность для touch/scroll
window.addEventListener('touchstart', function() {
    // Обработчик не может вызвать preventDefault()
    console.log('Пассивный обработчик touchstart');
}, { passive: true });

// signal: отмена через AbortController
const controller = new AbortController();
const signal = controller.signal;

const abortBtn = document.createElement('button');
abortBtn.textContent = 'Кнопка с abort';
abortBtn.style.marginLeft = '10px';
document.body.appendChild(abortBtn);

abortBtn.addEventListener('click', function() {
    console.log('Обработчик сработал');
}, { signal });

// Отменяем обработчик через 3 секунды
setTimeout(() => {
    controller.abort();
    console.log('Обработчик отменен');
}, 3000);</code></pre>
								</div>
								<button class="btn btn-primary run-code" onclick="runAddEventListenerDemo()">
									<i class="fas fa-play"></i> Запустить демо
								</button>
								<div class="output-container">
									<h4>Консоль:</h4>
									<div id="addEventListenerOutput" class="console-output">
										<div class="console-line info">Нажмите "Запустить демо" и взаимодействуйте с
											кнопками</div>
									</div>
								</div>
							</div>
							<div class="tip-box">
								<h4><i class="fas fa-check-circle"></i> Преимущества addEventListener:</h4>
								<ul>
									<li><strong>Множественные обработчики</strong> - можно добавить несколько на одно
										событие</li>
									<li><strong>Гибкие опции</strong> - capture, once, passive, signal</li>
									<li><strong>Удаление обработчиков</strong> - через removeEventListener</li>
									<li><strong>Поддержка всех браузеров</strong> - стандартный API</li>
									<li><strong>Лучшая производительность</strong> - оптимизировано браузерами</li>
								</ul>
							</div>
						</div>

						<div class="tab-content" id="tab-remove">
							<h4><i class="fas fa-minus-circle"></i> Удаление обработчиков</h4>
							<div class="code-executor">
								<div class="code-editor">
									<pre><code class="javascript">// Создаем тестовые элементы
const container = document.createElement('div');
container.style.cssText = 'padding: 20px; border: 1px solid #ccc; margin: 10px 0;';

// Кнопка для добавления/удаления обработчиков
const controlBtn = document.createElement('button');
controlBtn.textContent = 'Кнопка с обработчиками';
container.appendChild(controlBtn);

// Создаем именованные функции для удаления
function firstHandler() {
    console.log('Первый обработчик');
}

function secondHandler() {
    console.log('Второй обработчик');
}

// Анонимная функция (нельзя удалить)
controlBtn.addEventListener('click', function() {
    console.log('Анонимный обработчик');
});

// Добавляем именованные обработчики
controlBtn.addEventListener('click', firstHandler);
controlBtn.addEventListener('click', secondHandler);

// Кнопки управления
const addHandlerBtn = document.createElement('button');
addHandlerBtn.textContent = 'Добавить обработчик';
addHandlerBtn.style.marginLeft = '10px';

const removeHandlerBtn = document.createElement('button');
removeHandlerBtn.textContent = 'Удалить обработчик';
removeHandlerBtn.style.marginLeft = '10px';

const removeAllBtn = document.createElement('button');
removeAllBtn.textContent = 'Удалить все именованные';
removeAllBtn.style.marginLeft = '10px';

container.appendChild(addHandlerBtn);
container.appendChild(removeHandlerBtn);
container.appendChild(removeAllBtn);

// Динамическое добавление обработчика
let dynamicHandler = null;
let handlerCount = 0;

addHandlerBtn.addEventListener('click', function() {
    handlerCount++;
    dynamicHandler = function() {
        console.log(`Динамический обработчик #${handlerCount}`);
    };
    
    controlBtn.addEventListener('click', dynamicHandler);
    console.log(`Добавлен обработчик #${handlerCount}`);
});

// Удаление динамического обработчика
removeHandlerBtn.addEventListener('click', function() {
    if (dynamicHandler) {
        controlBtn.removeEventListener('click', dynamicHandler);
        console.log('Удален динамический обработчик');
        dynamicHandler = null;
    } else {
        console.log('Нет динамического обработчика для удаления');
    }
});

// Удаление всех именованных обработчиков
removeAllBtn.addEventListener('click', function() {
    controlBtn.removeEventListener('click', firstHandler);
    controlBtn.removeEventListener('click', secondHandler);
    console.log('Все именованные обработчики удалены');
});

// Удаление через клон элемента (радикальный способ)
const cloneBtn = document.createElement('button');
cloneBtn.textContent = 'Удалить через клон';
cloneBtn.style.marginLeft = '10px';

cloneBtn.addEventListener('click', function() {
    const clone = controlBtn.cloneNode(true);
    controlBtn.parentNode.replaceChild(clone, controlBtn);
    console.log('Все обработчики удалены через клонирование');
});

container.appendChild(cloneBtn);

// Удаление через AbortController
const abortController = new AbortController();
const abortSignal = abortController.signal;

const abortableBtn = document.createElement('button');
abortableBtn.textContent = 'Кнопка с AbortController';
abortableBtn.style.marginTop = '10px';
container.appendChild(abortableBtn);

abortableBtn.addEventListener('click', function() {
    console.log('Обработчик с AbortController');
}, { signal: abortSignal });

const abortBtn = document.createElement('button');
abortBtn.textContent = 'Abort обработчики';
abortBtn.style.marginLeft = '10px';
container.appendChild(abortBtn);

abortBtn.addEventListener('click', function() {
    abortController.abort();
    console.log('Обработчики отменены через AbortController');
});

// Индикатор текущих обработчиков
const statusDiv = document.createElement('div');
statusDiv.style.marginTop = '10px';
statusDiv.style.padding = '10px';
statusDiv.style.background = '#f7fafc';
statusDiv.style.border = '1px solid #e2e8f0';
statusDiv.innerHTML = '<strong>Статус:</strong> обработчики активны';
container.appendChild(statusDiv);

document.body.appendChild(container);</code></pre>
								</div>
								<button class="btn btn-primary run-code" onclick="runRemoveHandlersDemo()">
									<i class="fas fa-play"></i> Запустить демо
								</button>
								<div class="output-container">
									<h4>Консоль:</h4>
									<div id="removeOutput" class="console-output">
										<div class="console-line info">Нажмите "Запустить демо" и тестируйте
											добавление/удаление обработчиков</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>

				<!-- ===== РАЗДЕЛ 4: Объект события ===== -->
				<section id="event-object" class="lesson-section">
					<h2><i class="fas fa-box"></i> Объект события</h2>
					<p>При срабатывании события функция-обработчик получает объект события, содержащий всю информацию
						о произошедшем событии.</p>

					<div class="methods-grid">
						<div class="method-card">
							<div class="method-header">
								<h4><code>event.type</code></h4>
								<span class="method-tag">Тип</span>
							</div>
							<p>Тип произошедшего события (click, mouseover, keydown и т.д.).</p>
							<pre><code class="javascript">element.addEventListener('click', function(e) {
    console.log('Тип события:', e.type); // 'click'
});

element.addEventListener('mouseover', function(e) {
    console.log('Тип события:', e.type); // 'mouseover'
});</code></pre>
						</div>

						<div class="method-card">
							<div class="method-header">
								<h4><code>event.target</code></h4>
								<span class="method-tag">Цель</span>
							</div>
							<p>Элемент, на котором произошло событие (оригинальный источник).</p>
							<pre><code class="javascript">// target - элемент, на котором произошло событие
container.addEventListener('click', function(e) {
    console.log('Клик на:', e.target.tagName);
    
    if (e.target.classList.contains('item')) {
        console.log('Клик по элементу списка');
    }
});</code></pre>
						</div>

						<div class="method-card">
							<div class="method-header">
								<h4><code>event.currentTarget</code></h4>
								<span class="method-tag">Текущий</span>
							</div>
							<p>Элемент, к которому прикреплен обработчик (может отличаться от target).</p>
							<pre><code class="javascript">// currentTarget - элемент с обработчиком
parent.addEventListener('click', function(e) {
    console.log('target:', e.target.tagName);
    console.log('currentTarget:', e.currentTarget.tagName);
    // e.target может быть child, а e.currentTarget - parent
});</code></pre>
						</div>

						<div class="method-card">
							<div class="method-header">
								<h4><code>event.preventDefault()</code></h4>
								<span class="method-tag">Метод</span>
							</div>
							<p>Отменяет стандартное действие браузера для этого события.</p>
							<pre><code class="javascript">// Отмена стандартного поведения
link.addEventListener('click', function(e) {
    e.preventDefault();
    console.log('Навигация отменена');
});

form.addEventListener('submit', function(e) {
    e.preventDefault();
    console.log('Отправка формы отменена');
});</code></pre>
						</div>
					</div>

					<div class="methods-demo">
						<div class="example-card">
							<div class="example-header">
								<span class="example-badge">1</span>
								<h4>Свойства событий мыши</h4>
							</div>
							<pre><code class="javascript">element.addEventListener('click', function(e) {
    // Координаты относительно окна браузера
    console.log('clientX:', e.clientX);
    console.log('clientY:', e.clientY);
    
    // Координаты относительно документа
    console.log('pageX:', e.pageX);
    console.log('pageY:', e.pageY);
    
    // Координаты относительно элемента
    console.log('offsetX:', e.offsetX);
    console.log('offsetY:', e.offsetY);
    
    // Кнопка мыши (0=левая, 1=средняя, 2=правая)
    console.log('button:', e.button);
    
    // Модификаторы
    console.log('ctrlKey:', e.ctrlKey);
    console.log('shiftKey:', e.shiftKey);
    console.log('altKey:', e.altKey);
    
    // Связанные элементы (для mouseover/mouseout)
    console.log('relatedTarget:', e.relatedTarget);
});</code></pre>
							<button class="btn btn-primary" onclick="runMousePropertiesDemo()">
								<i class="fas fa-play"></i> Запустить
							</button>
						</div>

						<div class="example-card">
							<div class="example-header">
								<span class="example-badge">2</span>
								<h4>Свойства событий клавиатуры</h4>
							</div>
							<pre><code class="javascript">input.addEventListener('keydown', function(e) {
    // Нажатая клавиша
    console.log('key:', e.key);         // 'a', 'Enter', 'ArrowUp'
    console.log('code:', e.code);       // 'KeyA', 'Enter', 'ArrowUp'
    
    // Код клавиши (устаревшее)
    console.log('keyCode:', e.keyCode); // 65, 13, 38
    
    // Модификаторы
    console.log('ctrlKey:', e.ctrlKey);
    console.log('shiftKey:', e.shiftKey);
    console.log('altKey:', e.altKey);
    console.log('metaKey:', e.metaKey); // Command/Win
    
    // Повторение (удержание)
    console.log('repeat:', e.repeat);
    
    // Расположение (левая/правая клавиша)
    console.log('location:', e.location);
    
    // Пример: блокировка Ctrl+U
    if (e.ctrlKey && e.key === 'u') {
        e.preventDefault();
        console.log('Ctrl+U заблокирован');
    }
});</code></pre>
							<button class="btn btn-primary" onclick="runKeyboardPropertiesDemo()">
								<i class="fas fa-play"></i> Запустить
							</button>
						</div>
					</div>
				</section>

				<!-- ===== РАЗДЕЛ 5: Всплытие и погружение ===== -->
				<section id="event-flow" class="lesson-section">
					<h2><i class="fas fa-water"></i> Всплытие и погружение событий</h2>

					<div class="event-flow-demo">
						<h3><i class="fas fa-sitemap"></i> Демонстрация потока событий</h3>
						<div class="flow-container">
							<div class="flow-level" id="grandparent">
								<span>Дедушка (grandparent)</span>
								<div class="flow-level" id="parent">
									<span>Родитель (parent)</span>
									<div class="flow-level" id="child">
										<span>Ребенок (child)</span>
										<button class="btn btn-primary" id="triggerBtn">Кликни меня</button>
									</div>
								</div>
							</div>
						</div>

						<div class="flow-controls">
							<button class="btn btn-secondary" onclick="startEventFlowDemo()">
								<i class="fas fa-play"></i> Запустить демо
							</button>
							<button class="btn btn-secondary" onclick="resetEventFlowDemo()">
								<i class="fas fa-redo"></i> Сбросить
							</button>
							<label class="checkbox-label">
								<input type="checkbox" id="useCapture" checked> Использовать фазу погружения
							</label>
						</div>

						<div id="flowOutput" class="console-output">
							<div class="console-line info">Нажмите "Запустить демо", затем кликните на кнопку</div>
						</div>
					</div>

					<div class="info-box">
						<h4><i class="fas fa-info-circle"></i> Три фазы распространения событий:</h4>
						<ol>
							<li><strong>Фаза погружения (Capturing)</strong> - событие движется сверху вниз, от window
								к target</li>
							<li><strong>Фаза цели (Target)</strong> - событие достигло целевого элемента</li>
							<li><strong>Фаза всплытия (Bubbling)</strong> - событие движется снизу вверх, от target к
								window</li>
						</ol>
						<p>По умолчанию обработчики срабатывают на фазе всплытия. Чтобы использовать фазу погружения,
							передайте <code>true</code> третьим параметром в <code>addEventListener</code>.</p>
					</div>
				</section>

				<!-- ===== РАЗДЕЛ 6: Делегирование событий ===== -->
				<section id="event-delegation" class="lesson-section">
					<h2><i class="fas fa-users"></i> Делегирование событий</h2>
					<p>Техника, при которой обработчик добавляется родительскому элементу, а не каждому дочернему
						элементу отдельно.</p>

					<div class="delegation-demo">
						<h3><i class="fas fa-list"></i> Динамический список</h3>
						<div class="list-controls">
							<input type="text" id="newItemInput" placeholder="Введите новый элемент">
							<button class="btn btn-primary" id="addItemBtn">Добавить элемент</button>
							<button class="btn btn-secondary" id="addMultipleBtn">Добавить 5 элементов</button>
							<button class="btn btn-danger" id="clearListBtn">Очистить список</button>
						</div>

						<div class="list-container">
							<ul id="itemList">
								<li class="list-item">Элемент 1 <span class="item-actions">[x]</span></li>
								<li class="list-item">Элемент 2 <span class="item-actions">[x]</span></li>
								<li class="list-item">Элемент 3 <span class="item-actions">[x]</span></li>
							</ul>
						</div>

						<div class="delegation-info">
							<h4><i class="fas fa-lightbulb"></i> Как работает делегирование:</h4>
							<pre><code class="javascript">// Плохой подход: обработчик для каждого элемента
document.querySelectorAll('.list-item').forEach(item => {
    item.addEventListener('click', function() {
        console.log('Клик по:', this.textContent);
    });
});

// Хороший подход: делегирование
document.getElementById('itemList').addEventListener('click', function(e) {
    // Проверяем, был ли клик по элементу списка
    if (e.target.classList.contains('list-item')) {
        console.log('Клик по элементу:', e.target.textContent);
    }
    
    // Или по кнопке удаления внутри элемента
    if (e.target.classList.contains('item-actions')) {
        console.log('Удаление элемента:', e.target.parentElement.textContent);
        e.target.parentElement.remove();
    }
});</code></pre>
							<p><strong>Преимущества:</strong> работает с динамически добавленными элементами, меньше
								обработчиков в памяти, проще управление.</p>
						</div>
					</div>
				</section>

				<!-- ===== РАЗДЕЛ 7: Практическое задание ===== -->
				<section id="practice" class="lesson-section">
					<h2><i class="fas fa-tasks"></i> Практическое задание</h2>
					<p>Создайте интерактивную панель инструментов с обработкой событий:</p>

					<div class="exercise">
						<div class="exercise-header">
							<h3>Задача: Интерактивная панель инструментов</h3>
							<span class="difficulty-badge">Продвинутый уровень</span>
						</div>

						<div class="exercise-content">
							<p>Реализуйте следующие компоненты:</p>
							<ol>
								<li>Панель инструментов с кнопками действий</li>
								<li>Область для рисования с отслеживанием мыши</li>
								<li>Обработку горячих клавиш для действий</li>
								<li>Форму с валидацией в реальном времени</li>
								<li>Систему логов событий</li>
								<li>Контекстное меню с пользовательскими действиями</li>
							</ol>

							<div class="hint-box">
								<h4><i class="fas fa-lightbulb"></i> Подсказки:</h4>
								<ul>
									<li>Используйте делегирование для динамических элементов</li>
									<li>Применяйте event.preventDefault() где необходимо</li>
									<li>Используйте event.stopPropagation() для контроля всплытия</li>
									<li>Реализуйте debounce/throttle для частых событий</li>
									<li>Добавьте поддержку touch событий для мобильных</li>
								</ul>
							</div>

							<div class="code-editor-area">
								<h4><i class="fas fa-code"></i> Редактор кода:</h4>
								<textarea id="exerciseCode" class="code-editor" placeholder="Напишите здесь ваш код..."
									rows="15">
// Ваш код здесь
// Пример начала:
class EventToolbar {
    constructor() {
        this.tools = [];
        this.init();
    }
    
    init() {
        console.log('Панель инструментов инициализирована');
        this.createToolbar();
        this.setupEventListeners();
    }
    
    createToolbar() {
        // Создание элементов интерфейса
    }
    
    setupEventListeners() {
        // Настройка обработчиков событий
    }
}

// Тестирование
const toolbar = new EventToolbar();</textarea>
								<div class="editor-actions">
									<button class="btn btn-primary" onclick="runEventsExercise()">
										<i class="fas fa-play"></i> Запустить код
									</button>
									<button class="btn btn-secondary" onclick="clearEventsExercise()">
										<i class="fas fa-eraser"></i> Очистить
									</button>
									<button class="btn btn-success" onclick="testEventsExercise()">
										<i class="fas fa-vial"></i> Запустить тесты
									</button>
								</div>
								<div id="exerciseOutput" class="output-area">
									<div class="output-placeholder">
										<i class="fas fa-terminal"></i>
										Вывод вашего кода появится здесь
									</div>
								</div>
							</div>

							<div class="solution-section">
								<button class="btn btn-warning show-solution">
									<i class="fas fa-code"></i> Показать решение
								</button>
								<div class="solution hidden">
									<h4><i class="fas fa-check-circle"></i> Пример решения:</h4>
									<pre><code class="javascript">// Решение: Интерактивная панель инструментов

class EventToolbar {
    constructor() {
        this.tools = [];
        this.logs = [];
        this.isDrawing = false;
        this.lastX = 0;
        this.lastY = 0;
        this.init();
    }
    
    init() {
        this.createUI();
        this.setupEventListeners();
        this.log('Панель инструментов инициализирована');
    }
    
    createUI() {
        // Создаем основной контейнер
        this.container = document.createElement('div');
        this.container.style.cssText = 'padding: 20px; font-family: Arial, sans-serif;';
        
        // Панель инструментов
        this.toolbar = document.createElement('div');
        this.toolbar.className = 'toolbar';
        this.toolbar.style.cssText = 'display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;';
        
        const tools = [
            { id: 'draw', text: '🎨 Рисовать', hotkey: 'd' },
            { id: 'erase', text: '🧹 Стереть', hotkey: 'e' },
            { id: 'color', text: '🌈 Цвет', hotkey: 'c' },
            { id: 'save', text: '💾 Сохранить', hotkey: 's' },
            { id: 'clear', text: '🗑️ Очистить', hotkey: 'Delete' }
        ];
        
        tools.forEach(tool => {
            const button = document.createElement('button');
            button.id = tool.id;
            button.textContent = tool.text;
            button.title = `Горячая клавиша: ${tool.hotkey}`;
            button.style.cssText = 'padding: 10px 15px; border: 1px solid #ccc; background: white; cursor: pointer; border-radius: 4px;';
            this.toolbar.appendChild(button);
            this.tools.push({ ...tool, element: button });
        });
        
        // Область для рисования
        this.canvas = document.createElement('div');
        this.canvas.id = 'drawingCanvas';
        this.canvas.style.cssText = 'width: 600px; height: 400px; border: 2px solid #ccc; background: white; margin: 20px 0; position: relative; cursor: crosshair;';
        this.canvas.textContent = 'Нарисуйте что-нибудь (удерживайте левую кнопку мыши)';
        this.canvas.style.display = 'flex';
        this.canvas.style.alignItems = 'center';
        this.canvas.style.justifyContent = 'center';
        this.canvas.style.color = '#999';
        
        // Форма для настроек
        this.form = document.createElement('form');
        this.form.id = 'settingsForm';
        this.form.style.cssText = 'margin: 20px 0; padding: 15px; border: 1px solid #ccc; max-width: 400px;';
        this.form.innerHTML = `
            <h3>Настройки рисования</h3>
            <div style="margin-bottom: 10px;">
                <label>Цвет линии:</label>
                <input type="color" id="lineColor" value="#ff0000">
            </div>
            <div style="margin-bottom: 10px;">
                <label>Толщина линии:</label>
                <input type="range" id="lineWidth" min="1" max="20" value="3">
                <span id="widthValue">3px</span>
            </div>
            <div style="margin-bottom: 10px;">
                <label>Прозрачность:</label>
                <input type="range" id="lineOpacity" min="0" max="100" value="100">
                <span id="opacityValue">100%</span>
            </div>
        `;
        
        // Логи событий
        this.logContainer = document.createElement('div');
        this.logContainer.id = 'eventLogs';
        this.logContainer.style.cssText = 'margin-top: 20px; padding: 15px; border: 1px solid #ccc; max-height: 200px; overflow-y: auto; background: #f9f9f9;';
        this.logContainer.innerHTML = '<h3>Логи событий:</h3>';
        
        // Собираем интерфейс
        this.container.appendChild(this.toolbar);
        this.container.appendChild(this.canvas);
        this.container.appendChild(this.form);
        this.container.appendChild(this.logContainer);
        
        document.body.appendChild(this.container);
    }
    
    setupEventListeners() {
        // Обработчики для кнопок инструментов
        this.tools.forEach(tool => {
            tool.element.addEventListener('click', () => {
                this.handleToolClick(tool.id);
            });
        });
        
        // События рисования
        this.canvas.addEventListener('mousedown', (e) => {
            this.startDrawing(e);
        });
        
        this.canvas.addEventListener('mousemove', (e) => {
            this.draw(e);
        });
        
        this.canvas.addEventListener('mouseup', () => {
            this.stopDrawing();
        });
        
        this.canvas.addEventListener('mouseleave', () => {
            this.stopDrawing();
        });
        
        // Touch события для мобильных
        this.canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            this.startDrawing({ clientX: touch.clientX, clientY: touch.clientY });
        });
        
        this.canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            this.draw({ clientX: touch.clientX, clientY: touch.clientY });
        });
        
        this.canvas.addEventListener('touchend', () => {
            this.stopDrawing();
        });
        
        // Горячие клавиши
        document.addEventListener('keydown', (e) => {
            this.handleHotkey(e);
        });
        
        // Обновление настроек в реальном времени
        const lineColor = document.getElementById('lineColor');
        const lineWidth = document.getElementById('lineWidth');
        const lineOpacity = document.getElementById('lineOpacity');
        const widthValue = document.getElementById('widthValue');
        const opacityValue = document.getElementById('opacityValue');
        
        lineWidth.addEventListener('input', () => {
            widthValue.textContent = `${lineWidth.value}px`;
            this.log(`Толщина линии изменена: ${lineWidth.value}px`);
        });
        
        lineOpacity.addEventListener('input', () => {
            opacityValue.textContent = `${lineOpacity.value}%`;
            this.log(`Прозрачность изменена: ${lineOpacity.value}%`);
        });
        
        lineColor.addEventListener('input', () => {
            this.log(`Цвет изменен: ${lineColor.value}`);
        });
        
        // Контекстное меню
        this.canvas.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            this.showContextMenu(e.clientX, e.clientY);
        });
        
        // Закрытие контекстного меню при клике вне его
        document.addEventListener('click', () => {
            this.hideContextMenu();
        });
    }
    
    handleToolClick(toolId) {
        switch(toolId) {
            case 'draw':
                this.log('Выбран инструмент: Рисование');
                this.canvas.style.cursor = 'crosshair';
                break;
            case 'erase':
                this.log('Выбран инструмент: Стирание');
                this.canvas.style.cursor = 'cell';
                this.clearCanvas();
                break;
            case 'color':
                this.log('Выбран инструмент: Цвет');
                document.getElementById('lineColor').click();
                break;
            case 'save':
                this.log('Сохранение изображения');
                this.saveCanvas();
                break;
            case 'clear':
                this.log('Очистка холста');
                this.clearCanvas();
                break;
        }
    }
    
    startDrawing(e) {
        this.isDrawing = true;
        const rect = this.canvas.getBoundingClientRect();
        this.lastX = e.clientX - rect.left;
        this.lastY = e.clientY - rect.top;
        this.log(`Начало рисования в точке: ${this.lastX}, ${this.lastY}`);
    }
    
    draw(e) {
        if (!this.isDrawing) return;
        
        const rect = this.canvas.getBoundingClientRect();
        const currentX = e.clientX - rect.left;
        const currentY = e.clientY - rect.top;
        
        // Создаем элемент линии
        const line = document.createElement('div');
        line.style.cssText = `
            position: absolute;
            background: ${document.getElementById('lineColor').value};
            opacity: ${document.getElementById('lineOpacity').value / 100};
            border-radius: 50%;
            pointer-events: none;
        `;
        
        // Рассчитываем позицию и размер
        const x = Math.min(this.lastX, currentX);
        const y = Math.min(this.lastY, currentY);
        const width = Math.abs(currentX - this.lastX);
        const height = Math.abs(currentY - this.lastY);
        const size = Math.max(width, height, parseInt(document.getElementById('lineWidth').value));
        
        line.style.left = `${x - size/2}px`;
        line.style.top = `${y - size/2}px`;
        line.style.width = `${size}px`;
        line.style.height = `${size}px`;
        
        this.canvas.appendChild(line);
        
        this.lastX = currentX;
        this.lastY = currentY;
    }
    
    stopDrawing() {
        if (this.isDrawing) {
            this.isDrawing = false;
            this.log('Рисование завершено');
        }
    }
    
    handleHotkey(e) {
        // Игнорируем горячие клавиши при фокусе на input
        if (e.target.tagName === 'INPUT') return;
        
        const tool = this.tools.find(t => t.hotkey.toLowerCase() === e.key.toLowerCase());
        if (tool) {
            e.preventDefault();
            tool.element.click();
            this.log(`Горячая клавиша: ${e.key} -> ${tool.text}`);
        }
        
        // Дополнительные горячие клавиши
        if (e.key === 'Escape') {
            this.clearCanvas();
            this.log('Escape: Очистка холста');
        }
        
        if (e.ctrlKey && e.key === 'z') {
            this.undoLast();
            this.log('Ctrl+Z: Отмена последнего действия');
        }
    }
    
    clearCanvas() {
        while (this.canvas.firstChild) {
            this.canvas.removeChild(this.canvas.firstChild);
        }
        this.canvas.textContent = 'Нарисуйте что-нибудь (удерживайте левую кнопку мыши)';
        this.canvas.style.display = 'flex';
        this.canvas.style.alignItems = 'center';
        this.canvas.style.justifyContent = 'center';
        this.canvas.style.color = '#999';
    }
    
    saveCanvas() {
        // В реальном приложении здесь была бы логика сохранения
        this.log('Изображение сохранено (в демо-режиме)');
        alert('В реальном приложении здесь было бы сохранение изображения');
    }
    
    undoLast() {
        const lastChild = this.canvas.lastChild;
        if (lastChild && lastChild.style.position === 'absolute') {
            this.canvas.removeChild(lastChild);
            this.log('Отменено последнее действие');
        }
    }
    
    showContextMenu(x, y) {
        this.hideContextMenu(); // Удаляем старое меню
        
        const menu = document.createElement('div');
        menu.id = 'contextMenu';
        menu.style.cssText = `
            position: fixed;
            left: ${x}px;
            top: ${y}px;
            background: white;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            min-width: 150px;
        `;
        
        const actions = [
            { text: 'Копировать', action: () => this.log('Контекстное меню: Копировать') },
            { text: 'Вставить', action: () => this.log('Контекстное меню: Вставить') },
            { text: '---' },
            { text: 'Сохранить как...', action: () => this.saveCanvas() },
            { text: 'Очистить', action: () => this.clearCanvas() },
            { text: '---' },
            { text: 'Настройки...', action: () => document.getElementById('lineColor').focus() }
        ];
        
        actions.forEach(action => {
            if (action.text === '---') {
                const separator = document.createElement('hr');
                separator.style.margin = '5px 0';
                menu.appendChild(separator);
            } else {
                const item = document.createElement('div');
                item.textContent = action.text;
                item.style.cssText = 'padding: 8px 12px; cursor: pointer;';
                item.addEventListener('mouseenter', () => {
                    item.style.background = '#f0f0f0';
                });
                item.addEventListener('mouseleave', () => {
                    item.style.background = 'white';
                });
                item.addEventListener('click', () => {
                    action.action();
                    this.hideContextMenu();
                });
                menu.appendChild(item);
            }
        });
        
        document.body.appendChild(menu);
        this.log('Показано контекстное меню');
    }
    
    hideContextMenu() {
        const menu = document.getElementById('contextMenu');
        if (menu) {
            menu.remove();
        }
    }
    
    log(message) {
        const time = new Date().toLocaleTimeString();
        const logEntry = document.createElement('div');
        logEntry.textContent = `[${time}] ${message}`;
        logEntry.style.cssText = 'padding: 2px 0; border-bottom: 1px solid #eee; font-size: 12px;';
        
        this.logContainer.appendChild(logEntry);
        this.logContainer.scrollTop = this.logContainer.scrollHeight;
        this.logs.push({ time, message });
        
        // Ограничиваем количество логов
        if (this.logs.length > 50) {
            this.logContainer.removeChild(this.logContainer.firstChild);
            this.logs.shift();
        }
    }
}

// Инициализация приложения
console.log('=== ИНТЕРАКТИВНАЯ ПАНЕЛЬ ИНСТРУМЕНТОВ ===');
const app = new EventToolbar();

// Дополнительные тестовые сценарии
setTimeout(() => {
    app.log('Подсказка: используйте горячие клавиши d, e, c, s, Delete');
    app.log('Подсказка: правый клик по холсту откроет контекстное меню');
}, 1000);

setTimeout(() => {
    app.log('Подсказка: для мобильных устройств используйте touch-жесты');
}, 3000);</code></pre>
									<div class="solution-tips">
										<h5><i class="fas fa-tips"></i> Советы по улучшению:</h5>
										<ul>
											<li>Добавьте поддержку различных кистей и текстур</li>
											<li>Реализуйте историю действий для undo/redo</li>
											<li>Добавьте экспорт в различные форматы (PNG, JPEG, SVG)</li>
											<li>Создайте библиотеку шаблонов и фигур</li>
											<li>Добавьте слои и режимы наложения</li>
											<li>Реализуйте распознавание жестов для сенсорных устройств</li>
											<li>Добавьте автосохранение и восстановление сессий</li>
											<li>Создайте плагинную систему для инструментов</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Пройденные темы -->
					<div class="topics-summary">
						<h3><i class="fas fa-graduation-cap"></i> Вы изучили:</h3>
						<div class="topics-list">
							<div class="topic-item">
								<i class="fas fa-check-circle"></i>
								<span>Что такое события и зачем они нужны</span>
							</div>
							<div class="topic-item">
								<i class="fas fa-check-circle"></i>
								<span>Типы событий (мышь, клавиатура, формы, окно)</span>
							</div>
							<div class="topic-item">
								<i class="fas fa-check-circle"></i>
								<span>Способы обработки событий</span>
							</div>
							<div class="topic-item">
								<i class="fas fa-check-circle"></i>
								<span>Объект события и его свойства/методы</span>
							</div>
							<div class="topic-item">
								<i class="fas fa-check-circle"></i>
								<span>Всплытие и погружение событий</span>
							</div>
							<div class="topic-item">
								<i class="fas fa-check-circle"></i>
								<span>Делегирование событий</span>
							</div>
							<div class="topic-item">
								<i class="fas fa-check-circle"></i>
								<span>Создание интерактивной панели инструментов</span>
							</div>
						</div>
					</div>
				</section>

				<!-- Навигация между уроками -->
				<div class="navigation-buttons">
					<a href="dom.html" class="nav-btn prev-btn">
						<i class="fas fa-arrow-left"></i> Назад: DOM
					</a>
					<a href="async.html" class="nav-btn next-btn">
						Следующий урок: Асинхронность <i class="fas fa-arrow-right"></i>
					</a>
				</div>

				<!-- Дополнительные материалы -->
				<div class="additional-materials">
					<h3><i class="fas fa-book-open"></i> Дополнительные материалы</h3>
					<div class="materials-list">
						<a href="https://developer.mozilla.org/ru/docs/Web/Events" target="_blank"
							class="material-link">
							<i class="fas fa-external-link-alt"></i>
							<span>Документация MDN по событиям</span>
						</a>
						<a href="https://learn.javascript.ru/events" target="_blank" class="material-link">
							<i class="fas fa-external-link-alt"></i>
							<span>События на learn.javascript.ru</span>
						</a>
						<a href="#" class="material-link">
							<i class="fas fa-download"></i>
							<span>Скачать шпаргалку по событиям</span>
						</a>
					</div>
				</div>
			</div>
		</div>
	</main>

	<footer class="footer">
		<div class="container">
			<p>&copy; 2026 Мини проект по JavaScript.</p>
			<p>Сайт создан для ознакомительной цели.</p>
		</div>
	</footer>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
	<script src="../js/main.js"></script>
	<script src="../js/burger-menu.js"></script>
	<script src="../js/basic-components.js"></script>
	<script src="../js/component/events.js"></script>
</body>

</html>